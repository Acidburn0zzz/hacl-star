#include "kremlin/internal/types.h"
#include "kremlin/lowstar_endianness.h"
#include <string.h>
// #include "lib_intrinsics.h"


#include "Hacl_Kremlib.h"
#include "Hacl_P256.h"
#include "Hacl_Spec.h"


#include <inttypes.h>


void print_felem(uint64_t * a)
{
	for (int i = 0; i< 4; i++)
		printf("%" PRIu64 "\n", a[i]);
}

// prime = 2** 256 - 2** 224 + 2** 192 + 2** 96 -1

// r = getrandbits(256) % prime
// f = list()
// last = 0

// for i in range(9):
//     z = getrandbits(256) % prime
//     f.append(z)

// for i in f:
//     last = (last + i) % prime
    
// last = prime - last


// for i in f:
//     for j in range(4):
//         print((i >> (j * 64)) % (2 ** 64))


int main()
{

	int shares = 100;

	uint64_t x[4] = {0UL,
0UL,
0UL,
10UL};

	uint64_t b [400] = {
		10397413085229972449UL,
		9998374008435034831UL,
		575959400002871446UL,
		5067381164408654230UL,
		11419923954000107790UL,
		15676536614951240589UL,
		16458439687425441426UL,
		4879838071236184041UL,
		6268215701921897852UL,
		15372144393916080183UL,
		17143209225195343177UL,
		1177265148077296968UL,
		10848579264548277976UL,
		15941297262987688597UL,
		9170045716205682667UL,
		10191236719340465094UL,
		785405948488287061UL,
		13137372153188641102UL,
		2858369299112724842UL,
		2758379676784887699UL,
		13078417845819643322UL,
		926205199568187126UL,
		7935880716421903442UL,
		18010034282296797149UL,
		166229672619282688UL,
		17305191728753152379UL,
		8626021208293897812UL,
		16607224785827987663UL,
		9739202921715572587UL,
		13544362353436467252UL,
		15757627806220617453UL,
		18160431215792951185UL,
		11217018761155534611UL,
		14191296241471201232UL,
		3204507413169810288UL,
		3196990082888507224UL,
		6110454094361869346UL,
		12260875600290109587UL,
		7049049049960102618UL,
		12694806097994984779UL,
		12543950884863009549UL,
		377957461370732886UL,
		18119016680400565172UL,
		968968912717255106UL,
		13012115816112794878UL,
		13447841789894211946UL,
		13226598451104392244UL,
		13974938447474993644UL,
		3067613414832455920UL,
		15775180076207661590UL,
		4743201442356011136UL,
		4428950653101896632UL,
		16987610085646058533UL,
		17249582479326449914UL,
		8249204598345761956UL,
		3604872876220306148UL,
		14466741290251715539UL,
		14908597851320589591UL,
		8914856991928267391UL,
		2805221262724528388UL,
		16223705031950678471UL,
		11399090655081266609UL,
		8197033892233262781UL,
		2319532583655087808UL,
		11485918413443908784UL,
		15106890826909604677UL,
		5368359844262957579UL,
		4236393749385073792UL,
		5875760262176711541UL,
		6824044685392656223UL,
		10288340207328947378UL,
		9253257053408638846UL,
		15437750633820076679UL,
		978358767626430771UL,
		6989552589663837097UL,
		1052637267232756383UL,
		14741910790154571434UL,
		12552659485402385457UL,
		10913497863369253154UL,
		17861674482428130823UL,
		9272070965740928489UL,
		17276038887394361850UL,
		18380020479085703418UL,
		15275652530286862525UL,
		7443710384958484170UL,
		1756163853211673193UL,
		10183609623099506391UL,
		11882523221229326564UL,
		2004641629261818195UL,
		16697139068755000354UL,
		4472101185689088076UL,
		12806594571507029754UL,
		16329750128125357131UL,
		6660424494333007657UL,
		11180781299461384249UL,
		5806931579803788880UL,
		17902476361709850369UL,
		15160743122600457118UL,
		4387329015705569094UL,
		5585886209542364312UL,
		8632082489304494866UL,
		10521743908600964347UL,
		132879066677298784UL,
		4107414039601879975UL,
		11432053491874468210UL,
		6922916897936403143UL,
		17603928127220991337UL,
		13653385531508405889UL,
		13740000100405298874UL,
		17521986284366392698UL,
		2771910768395361450UL,
		11024995415181539982UL,
		12027285852102057511UL,
		4310752055929531366UL,
		17365781894640618172UL,
		15799911387793432877UL,
		13278288778356066679UL,
		12877537096297090737UL,
		9457821360602155308UL,
		14565698957386243637UL,
		8100317185545471675UL,
		656554109818382639UL,
		2067069306444359254UL,
		12404307977321112433UL,
		11336360868555318590UL,
		3971101296288905048UL,
		15608421935459336978UL,
		11031121815766559992UL,
		7153942248251433467UL,
		10625035933545786738UL,
		13462543013425142524UL,
		2432609960705250678UL,
		12038574507034090904UL,
		8342308046861071065UL,
		2758838386175434872UL,
		10544708967729185575UL,
		9077436426112788459UL,
		8019007861998505937UL,
		13460123630197971599UL,
		4676888879773584296UL,
		18096826667549127965UL,
		17352562853248988699UL,
		9517965948650592157UL,
		1281288619641032776UL,
		11658950428759512752UL,
		6338903106325837784UL,
		2698861716410091034UL,
		6708589771435772926UL,
		780319988074317959UL,
		17484051380762793885UL,
		11660806590793175844UL,
		8256699983714712185UL,
		3291106408995746724UL,
		15423832873303670477UL,
		18150834808412774716UL,
		12368349723855977236UL,
		8313623844549878175UL,
		7063923855404024014UL,
		4153111557728211421UL,
		13253963928137527013UL,
		11446723818544106203UL,
		12360030454823301412UL,
		5701194137211112986UL,
		8183324963914156525UL,
		2223430019956398134UL,
		4499226772894127257UL,
		2780513369223703208UL,
		15405987599788422933UL,
		3536393677451541333UL,
		14200754164480625630UL,
		14543285282522638123UL,
		11574965702109355929UL,
		13025524332990392231UL,
		3026444477914631870UL,
		6806258284762851912UL,
		838222716917388596UL,
		10171264704871133667UL,
		8420332508356517972UL,
		4880702300913182153UL,
		7465731370974966905UL,
		1850391831186072873UL,
		1977471426952173448UL,
		15881987693587709677UL,
		13827361119711331298UL,
		10751607409958216443UL,
		12693607484944718774UL,
		938936836989395846UL,
		771926124634641836UL,
		3240300797482222563UL,
		13440056091713938833UL,
		4338262533482167053UL,
		135617115192252189UL,
		10417536190966315965UL,
		17892494956911199090UL,
		9000988781920285960UL,
		7981942089404952727UL,
		15015791052429949871UL,
		12814470653892523607UL,
		14710440579696709094UL,
		254300587204577885UL,
		16793706124967862434UL,
		7104854814240255378UL,
		11779163310749268916UL,
		13492998907507123778UL,
		10783154726877305987UL,
		15761063668862679638UL,
		449345540402862331UL,
		2421903169409561421UL,
		18130506833098029211UL,
		17862017876847445846UL,
		16031339524422910277UL,
		1756077417963072064UL,
		10677294119064230977UL,
		3768438898643168178UL,
		10034677681769470032UL,
		15352393472513782237UL,
		12410811479131440708UL,
		15946213879018895061UL,
		10851709221789428696UL,
		3578857425757181465UL,
		4491605550510533713UL,
		14773307959696213010UL,
		15637575774923072696UL,
		4222995433617066511UL,
		10624393309587015806UL,
		17837812466131361414UL,
		9833687312883986250UL,
		2816883815085406281UL,
		8493996377927436389UL,
		13088633850623390196UL,
		696630868770709049UL,
		5468813675752116178UL,
		11269450690171242953UL,
		15177364799333401363UL,
		5664560970016083584UL,
		6611428375710085207UL,
		6332062558837450717UL,
		10189032859821162675UL,
		15022657756325473936UL,
		3577886695291487062UL,
		5555309536954327886UL,
		10213031020355092331UL,
		8794558230359747967UL,
		1553599745314735467UL,
		5668874588310466143UL,
		13284487991282687368UL,
		16632894449105516518UL,
		14385576663428823362UL,
		7182651918760892318UL,
		4495369721161918461UL,
		5853910693387393661UL,
		2110044853842074651UL,
		4852424547381679280UL,
		10246666529341194007UL,
		14518053998111058811UL,
		15424882833056518027UL,
		2730844780141281470UL,
		404084747791979977UL,
		16355854708812849078UL,
		10180946739059934906UL,
		12727236651931628697UL,
		12995264152831451250UL,
		9371526620986831896UL,
		1039784516432630352UL,
		13607134023816289791UL,
		790972244088588424UL,
		5325643084708841183UL,
		14014928603075277471UL,
		3739690231186973495UL,
		15730671563206891774UL,
		14894898147711628407UL,
		13195476343888295320UL,
		16080539913451812133UL,
		1746011875002894119UL,
		3864092040842293460UL,
		1999662850154280575UL,
		9417801884069187330UL,
		1272237842783997639UL,
		8185998761719602193UL,
		12556650714896440441UL,
		11080657314602606612UL,
		13581735466713152284UL,
		1596983531872792434UL,
		1455876165806649979UL,
		539643311111861270UL,
		14202624046364825396UL,
		7276873677784799217UL,
		11178691829293006603UL,
		13446635016381594594UL,
		10878137338476774143UL,
		7796956837713063441UL,
		6850376501536764594UL,
		1595229624718969270UL,
		6203938371921966599UL,
		2173393833876696845UL,
		5745323724324154204UL,
		551232573687433396UL,
		17725841829098887986UL,
		3520659666354246962UL,
		9812666059403878763UL,
		10733626528663201628UL,
		8578228112428225864UL,
		8292027561285497269UL,
		2840685585508564964UL,
		14105085585494441341UL,
		6716568395896345664UL,
		17113342737843298890UL,
		13867738947996899250UL,
		6286789110686782848UL,
		13659142358223588557UL,
		165373343647408663UL,
		6844036910953863895UL,
		2320610710706019747UL,
		10063000657324367822UL,
		15048008171593161844UL,
		13182987134899729331UL,
		13207598811298142227UL,
		3200833022616907939UL,
		12642304885069767696UL,
		14706215834849888429UL,
		17788896403348050714UL,
		17726620969717040296UL,
		12650697850474207148UL,
		3333161418349441550UL,
		4892633055850769108UL,
		3486524527556821750UL,
		17503338673465969676UL,
		13258028746978550152UL,
		5500048150807650797UL,
		6736557711158118404UL,
		3876621611740050458UL,
		16086224213116454651UL,
		14872744032835741694UL,
		9931834059099127934UL,
		910790407644378854UL,
		17444390585649685169UL,
		8379408106677564023UL,
		7962772837155624068UL,
		14312739759933628303UL,
		11408045376139905459UL,
		3896511838390683704UL,
		6934200832888069969UL,
		17285774731707286544UL,
		14903631697715933788UL,
		9627451105499915651UL,
		15410757286313720947UL,
		7240427893633551155UL,
		1640071479787797709UL,
		8976122356204589419UL,
		14487847834832324260UL,
		8615823378172053743UL,
		2264563287805100874UL,
		18094982539307407847UL,
		8334757292568760437UL,
		13136985114718400456UL,
		16167846308873382387UL,
		1572190320665529488UL,
		9801420810529138621UL,
		3409024054898702861UL,
		16114986454444848108UL,
		7779697820701063484UL,
		33954289798221322UL,
		11519041761438576175UL,
		4370629707906644657UL,
		13822936021591601347UL,
		5117566123987804559UL,
		4137786282044745776UL,
		16690969488266066739UL,
		12652950478312404289UL,
		5930537283848857137UL,
		5970571443381864366UL,
		11430575401051984194UL,
		17759674135257806957UL,
		10145396717686537695UL,
		11063195614686348330UL,
		14597606523004570212UL,
		359489961337120305UL,
		12977794006169917572UL,
		13963013365841209632UL,
		15672752558082132787UL,
		868930837488599806UL,
		7483945747706406945UL,
		9557319257377856212UL,
		6110895686223316920UL,
		11045803373133721267UL,
		950408585131219343UL,
		13384163584165036514UL,
		13809012862009026821UL,
		1097681123785014882UL,
		4933333442070514549UL,
		14780384719720778532UL,
		457818477611638960UL,
		7827444309718770640UL,
		15658339054404036134UL,
		3764047388511418310UL,
		4238514482745866451UL,
		0,
		0,
		0,
		0
	};

	Hacl_P256_generateRandomShares(x, shares, b);

	print_felem(&b[(shares - 1) * 4]);

	
	printf("%s\n", "hello");


}




// gcc-9.1 -Idist -I/home/nkulatov/new2/kremlin/kremlin/include -I/home/nkulatov/new2/kremlin/kremlin/kremlib/dist/minimal -I ../../../lib/c -I . -march=native -mtune=native -O3 -I. -I /home/nkulatov/new2/kremlin/kremlin/include -I /home/nkulatov/new2/kremlin/kremlin/kremlib/dist/minimal -Wall -Wextra -Werror -std=c11 -Wno-unused-variable -Wno-unknown-warning-option -Wno-unused-but-set-variable -Wno-unused-parameter -Wno-infinite-recursion -g -fwrapv -D_BSD_SOURCE -D_DEFAULT_SOURCE -fPIC  -c -o ./dist/test.o ./dist/test.c
// gcc-9.1 -Idist -I/home/nkulatov/new2/kremlin/kremlin/include -I/home/nkulatov/new2/kremlin/kremlin/kremlib/dist/minimal -I ../../../lib/c -I . -march=native -mtune=native -O3 -I. -I /home/nkulatov/new2/kremlin/kremlin/include -I /home/nkulatov/new2/kremlin/kremlin/kremlib/dist/minimal -Wall -Wextra -Werror -std=c11 -g -fwrapv -D_BSD_SOURCE -D_DEFAULT_SOURCE -fPIC   -Wno-unused-variable -Wno-unused-parameter  -c -o ./dist/Hacl_P256.o ./dist/Hacl_P256.c
// gcc-9.1 -Idist -I/home/nkulatov/new2/kremlin/kremlin/include -I/home/nkulatov/new2/kremlin/kremlin/kremlib/dist/minimal -I ../../../lib/c -I . -march=native -mtune=native -O3 -flto dist/Hacl_P256.o dist/test.o /home/nkulatov/new2/kremlin/kremlin/kremlib/dist/generic/libkremlib.a dist/libecdsa.a -o dist/test.exe

